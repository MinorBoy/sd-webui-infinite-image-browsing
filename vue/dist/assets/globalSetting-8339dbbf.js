import{d as B,r as F,v as K,s as O,ap as L,o as p,k as f,c as l,B as o,E as e,a8 as c,A as k,p as S,l as u,n as $,t as r,m as b,S as x,aq as q,O as z,I as M,C as U,K as H,ar as Y,as as Z,at as j,au as J,Z as V,Y as Q,q as X}from"./index-e82e9f1c.js";import{N as A,_ as D,a as G,F as ee}from"./numInput-58f28092.js";import"./index-801ff788.js";/* empty css              *//* empty css              */import{o as te,g as le,C as ne}from"./functionalCallableComp-4ee97acb.js";const R="/infinite_image_browsing/fe-static/assets/sample-55dcafc6.webp",ae=["width","height","src"],oe=B({__name:"ImageSetting",setup(N){function a(w,d){return new Promise(g=>{const n=new Image;n.onload=()=>{const t=document.createElement("canvas");t.width=n.width*d,t.height=n.height*d,t.getContext("2d").drawImage(n,0,0,t.width,t.height),g(t.toDataURL())},n.src=w})}const i=F(),v=K("");return O(()=>[i.enableThumbnail,i.gridThumbnailResolution],L(async()=>{i.enableThumbnail&&(v.value=await a(R,i.gridThumbnailResolution/1024))},300),{immediate:!0,deep:!0}),(w,d)=>{const g=D,n=G;return p(),f($,null,[l(g,{label:e(c)("defaultGridCellWidth")},{default:o(()=>[l(A,{min:64,max:1024,step:32,modelValue:e(i).defaultGridCellWidth,"onUpdate:modelValue":d[0]||(d[0]=t=>e(i).defaultGridCellWidth=t)},null,8,["modelValue"])]),_:1},8,["label"]),l(g,{label:e(c)("useThumbnailPreview")},{default:o(()=>[l(n,{checked:e(i).enableThumbnail,"onUpdate:checked":d[1]||(d[1]=t=>e(i).enableThumbnail=t)},null,8,["checked"])]),_:1},8,["label"]),e(i).enableThumbnail?(p(),k(g,{key:0,label:e(c)("thumbnailResolution")},{default:o(()=>[l(A,{modelValue:e(i).gridThumbnailResolution,"onUpdate:modelValue":d[2]||(d[2]=t=>e(i).gridThumbnailResolution=t),min:256,max:1024,step:64},null,8,["modelValue"])]),_:1},8,["label"])):S("",!0),l(g,{label:e(c)("livePreview")},{default:o(()=>[u("div",null,[u("img",{width:e(i).defaultGridCellWidth,height:e(i).defaultGridCellWidth,src:e(i).enableThumbnail?v.value:e(R)},null,8,ae)])]),_:1},8,["label"])],64)}}}),se={class:"panel"},ie={style:{"margin-top":"0"}},de={class:"lang-select-wrap"},ue={class:"col"},re={class:"col"},ce={class:"col"},me=B({__name:"globalSetting",setup(N){const a=F(),i=K(!1),v=async()=>{window.location.reload()},w=[{value:"en",text:"English"},{value:"zhHans",text:"简体中文"},{value:"zhHant",text:"繁體中文"},{value:"de",text:"Deutsch"}],d=(n,t)=>{const _=le(n);_&&(a.shortcut[t]=_)},g=async()=>{await Y("shutdown_api_server_command"),await Z.removeFile(j),await J()};return(n,t)=>{const _=V,m=D,y=G,C=V,P=ne,I=Q,E=ee;return p(),f("div",se,[S("",!0),l(E,null,{default:o(()=>{var T;return[u("h2",ie,r(e(c)("ImageBrowsingSettings")),1),l(oe),u("h2",null,r(e(c)("imgSearch")),1),l(m,{label:n.$t("rebuildImageIndex")},{default:o(()=>[l(_,{onClick:e(te)},{default:o(()=>[b(r(n.$t("start")),1)]),_:1},8,["onClick"])]),_:1},8,["label"]),u("h2",null,r(e(c)("other")),1),l(m,{label:n.$t("onlyFoldersAndImages")},{default:o(()=>[l(y,{checked:e(a).onlyFoldersAndImages,"onUpdate:checked":t[0]||(t[0]=s=>e(a).onlyFoldersAndImages=s)},null,8,["checked"])]),_:1},8,["label"]),l(m,{label:n.$t("defaultSortingMethod")},{default:o(()=>[l(e(x),{value:e(a).defaultSortingMethod,"onUpdate:value":t[1]||(t[1]=s=>e(a).defaultSortingMethod=s),conv:e(q),options:e(z)},null,8,["value","conv","options"])]),_:1},8,["label"]),l(m,{label:n.$t("longPressOpenContextMenu")},{default:o(()=>[l(y,{checked:e(a).longPressOpenContextMenu,"onUpdate:checked":t[2]||(t[2]=s=>e(a).longPressOpenContextMenu=s)},null,8,["checked"])]),_:1},8,["label"]),l(m,{label:n.$t("lang")},{default:o(()=>[u("div",de,[l(e(x),{options:w,value:e(a).lang,"onUpdate:value":t[3]||(t[3]=s=>e(a).lang=s),onChange:t[4]||(t[4]=s=>i.value=!0)},null,8,["value"])]),i.value?(p(),k(C,{key:0,type:"primary",onClick:v,ghost:""},{default:o(()=>[b(r(e(c)("langChangeReload")),1)]),_:1})):S("",!0)]),_:1},8,["label"]),(p(!0),f($,null,M(e(a).ignoredConfirmActions,(s,h)=>(p(),k(m,{label:n.$t(h+"SkipConfirm"),key:h},{default:o(()=>[l(P,{checked:e(a).ignoredConfirmActions[h],"onUpdate:checked":W=>e(a).ignoredConfirmActions[h]=W},null,8,["checked","onUpdate:checked"])]),_:2},1032,["label"]))),128)),u("h2",null,r(e(c)("shortcutKey")),1),l(m,{label:n.$t("download")},{default:o(()=>[u("div",ue,[l(I,{value:e(a).shortcut.download,onKeydown:t[5]||(t[5]=U(s=>d(s,"download"),["stop","prevent"])),placeholder:n.$t("shortcutKeyDescription")},null,8,["value","placeholder"]),l(C,{onClick:t[6]||(t[6]=s=>e(a).shortcut.download=""),class:"clear-btn"},{default:o(()=>[b(r(n.$t("clear")),1)]),_:1})])]),_:1},8,["label"]),(p(!0),f($,null,M(((T=e(a).conf)==null?void 0:T.all_custom_tags)??[],s=>(p(),k(m,{label:n.$t("toggleTagSelection",{tag:s.name}),key:s.id},{default:o(()=>[u("div",re,[l(I,{value:e(a).shortcut[`toggle_tag_${s.name}`],onKeydown:U(h=>d(h,`toggle_tag_${s.name}`),["stop","prevent"]),placeholder:n.$t("shortcutKeyDescription")},null,8,["value","onKeydown","placeholder"]),l(C,{onClick:h=>e(a).shortcut[`toggle_tag_${s.name}`]="",class:"clear-btn"},{default:o(()=>[b(r(n.$t("clear")),1)]),_:2},1032,["onClick"])])]),_:2},1032,["label"]))),128)),e(H)?(p(),f($,{key:0},[u("h2",null,r(e(c)("clientSpecificSettings")),1),l(m,null,{default:o(()=>[u("div",ce,[l(C,{onClick:g,class:"clear-btn"},{default:o(()=>[b(r(n.$t("initiateSoftwareStartupConfig")),1)]),_:1})])]),_:1})],64)):S("",!0)]}),_:1})])}}});const ve=X(me,[["__scopeId","data-v-749c8720"]]);export{ve as default};
